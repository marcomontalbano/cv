<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Content Manager</title>
        <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    </head>
    <body>
        <!-- Include the script that builds the page and powers Netlify CMS -->
        <script src="https://unpkg.com/netlify-cms@^2.0.0/dist/netlify-cms.js"></script>

        <script>
            CMS.registerPreviewStyle('netlify-cms.css');
        </script>

        <!-- Widget UUID -->
        <script src="https://unpkg.com/uuid@8.0.0/dist/umd/uuidv4.min.js"></script>
        <script>
            var UuidControl = createClass({
            componentDidMount: function () {
                const value = this.props.value ? this.props.value : uuidv4();
                this.props.onChange(value)
            },

            handleChange: function(e) {
                this.props.onChange(e.target.value.trim());
            },

            render: function() {
                return h('input', {
                style: {
                    'background-color': '#f5f5f5',
                    'color': '#9E9E9E'
                },
                type: 'text',
                disabled: 'disabled',
                value: this.props.value,
                onChange: this.handleChange,
                className: this.props.classNameWrapper
                });
            }
            });

            var UuidPreview = createClass({
            render: function() {
                return h('p', {}, this.props.value);
            }
            });

            CMS.registerWidget('uuid', UuidControl, UuidPreview);
        </script>
    </body>
</html>
